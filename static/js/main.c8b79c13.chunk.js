(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(13),r=n.n(a),s=(n(18),n(11)),i=n(5),u=n.n(i),l=n(8),d=n(4),b=(n(20),n(2)),j=n(6),h=n(10),f="https://reactnd-books-api.udacity.com",O=localStorage.token;O||(O=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:O},k=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)(Object(h.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},v=function(e,t){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(h.a)(Object(h.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},x=n(1),m=function(e){var t=e.bookReadCategory,n=e.onChangeShelf;return Object(x.jsx)("div",{className:"book-shelf-changer",children:Object(x.jsxs)("select",{value:void 0===t?"none":t,onChange:function(e){var t;t=e.target.value,n&&n(t)},children:[Object(x.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(x.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(x.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(x.jsx)("option",{value:"read",children:"Read"}),Object(x.jsx)("option",{value:"none",children:"None"})]})})},g=function(e){var t=e.book,n=e.onUpdateLocalBook;return Object(x.jsx)("li",{children:Object(x.jsxs)("div",{className:"book",children:[Object(x.jsxs)("div",{className:"book-top",children:[Object(x.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(t&&t.imageLinks&&t.imageLinks.thumbnail,'")')}}),Object(x.jsx)(m,{bookReadCategory:t.shelf,onChangeShelf:function(e){return function(e){!function(){var o=Object(l.a)(u.a.mark((function o(){return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,k(t,e);case 2:n(t,e);case 3:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}()()}(e)}})]}),Object(x.jsx)("div",{className:"book-title",children:t.title}),Object(x.jsx)("div",{className:"book-authors",children:t.author})]})})},y=function(e){var t=e.shelfBooks,n=e.updateBook,c=Object(o.useState)([]),a=Object(d.a)(c,2),r=a[0],i=a[1],b=Object(o.useState)(""),h=Object(d.a)(b,2),f=h[0],O=h[1];return Object(o.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.trim().length){e.next=7;break}return e.next=3,v(f,100);case 3:(n=e.sent).length?(n.forEach((function(e){t.forEach((function(t){e.id===t.id&&(e.shelf=t.shelf)}))})),i(n)):i([]),e.next=8;break;case 7:i([]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[f,t]),Object(x.jsxs)("div",{className:"search-books",children:[Object(x.jsxs)("div",{className:"search-books-bar",children:[Object(x.jsx)(j.b,{className:"close-search",to:"/",children:"Close"}),Object(x.jsx)("div",{className:"search-books-input-wrapper",children:Object(x.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:f,onChange:function(e){O(e.target.value)}})})]}),Object(x.jsx)("div",{className:"search-books-results",children:Object(x.jsx)("ol",{className:"books-grid",children:r.map((function(e){return Object(x.jsx)(g,{book:e,onUpdateLocalBook:function(e,t){return function(e,t){!function(){var o=r.findIndex((function(t){return t.id===e.id}));if(o>=0){var c=Object(s.a)(r);c[o].shelf=t,n(e,t),i(c)}}()}(e,t)}},e.id)}))})})]})},N=function(e){var t=e.shelf,n=e.books,o=e.updateBook,c=n.filter((function(e){return e.shelf===t.value}));return Object(x.jsxs)("div",{className:"bookshelf",children:[Object(x.jsx)("h2",{className:"bookshelf-title",children:t.name}),Object(x.jsx)("div",{className:"bookshelf-books",children:Object(x.jsx)("ol",{className:"books-grid",children:c.map((function(e){return Object(x.jsx)(g,{book:e,onUpdateLocalBook:function(e,t){return o(e,t)}},e.id)}))})})]})},R=function(e){var t=e.books,n=e.onUpdateBook;return Object(x.jsxs)("div",{className:"list-books",children:[Object(x.jsx)("div",{className:"list-books-title",children:Object(x.jsx)("h1",{children:"MyReads"})}),Object(x.jsx)("div",{className:"list-books-content",children:Object(x.jsx)("div",{children:[{name:"Currently Reading",value:"currentlyReading"},{name:"Want To Read",value:"wantToRead"},{name:"Read",value:"read"}].map((function(e){return Object(x.jsx)(N,{shelf:e,books:t,updateBook:function(e,t){return n(e,t)}},e.value)}))})}),Object(x.jsx)(j.b,{to:"/add",className:"open-search",children:"Add a book"})]})};var S=function(){var e=Object(o.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1];Object(o.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/books"),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var a=function(e,t){!function(){var o=n.findIndex((function(t){return t.id===e.id}));if(o>=0){var a=Object(s.a)(n);a[o].shelf=t,c(a)}}()};return Object(x.jsxs)(b.c,{children:[Object(x.jsx)(b.a,{exact:!0,path:"/",element:Object(x.jsx)(R,{books:n,onUpdateBook:function(e,t){return a(e,t)}})}),Object(x.jsx)(b.a,{exact:!0,path:"/add",element:Object(x.jsx)(y,{shelfBooks:n,updateBook:function(e,t){return a(e,t)}})})]})};r.a.render(Object(x.jsx)(j.a,{children:Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(S,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c8b79c13.chunk.js.map